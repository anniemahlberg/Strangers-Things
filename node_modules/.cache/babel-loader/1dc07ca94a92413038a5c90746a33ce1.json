{"ast":null,"code":"import _regeneratorRuntime from\"/Users/annamahlberg/Documents/Bootcamp/course_work/project_09/strangerThings/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/annamahlberg/Documents/Bootcamp/course_work/project_09/strangerThings/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var API_URL='https://strangers-things.herokuapp.com/api/2206-FTB-ET-WEB-FT-B';var NewPost=function NewPost(props){var setAlertMessage=props.setAlertMessage,token=props.token;var history=useHistory();var makePost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var title,description,price,location,deliver,userPost;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:title=document.getElementById(\"np-title\").value;description=document.getElementById(\"np-description\").value;price=document.getElementById(\"np-price\").value;location=document.getElementById(\"np-location\").value;deliver=document.getElementById('np-deliver').checked;event.preventDefault();userPost={title:title,description:description,price:price,location:location,willDeliver:deliver};_context.next=9;return getUserInfo(userPost);case 9:case\"end\":return _context.stop();}}},_callee);}));return function makePost(_x){return _ref.apply(this,arguments);};}();var getUserInfo=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(userPost){var newPost;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!userPost.location){userPost.location=\"[On Request]\";}_context2.next=3;return fetch(\"\".concat(API_URL,\"/posts\"),{method:\"POST\",headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({post:{title:userPost.title,description:userPost.description,price:userPost.price,location:userPost.location,willDeliver:userPost.willDeliver}})}).then(function(response){return response.json();}).then(function(result){if(!result.error){setAlertMessage(\"Your post has been added!\");history.push('/');}else{setAlertMessage(\"There was an error adding your post.\");}}).catch(console.error);case 3:newPost=_context2.sent;case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function getUserInfo(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"new-post\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create New Post\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inputs\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"np-title\",placeholder:\"Title * \",required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{id:\"np-description\",placeholder:\"Description * \",required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{id:\"np-price\",placeholder:\"Price * \",required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{id:\"np-location\",placeholder:\"Location\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{id:\"np-deliver\",type:\"checkbox\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Willing To Deliver?\"}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"submit-button\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:makePost,children:\"CREATE\"})})]})]});};export default NewPost;","map":{"version":3,"names":["useHistory","API_URL","NewPost","props","setAlertMessage","token","history","makePost","event","title","document","getElementById","value","description","price","location","deliver","checked","preventDefault","userPost","willDeliver","getUserInfo","fetch","method","headers","body","JSON","stringify","post","then","response","json","result","error","push","catch","console","newPost"],"sources":["/Users/annamahlberg/Documents/Bootcamp/course_work/project_09/strangerThings/src/newPost.js"],"sourcesContent":["import { useHistory } from \"react-router-dom\";\n\nconst API_URL = 'https://strangers-things.herokuapp.com/api/2206-FTB-ET-WEB-FT-B'\n\nconst NewPost = (props) => {\n    const { setAlertMessage, token } = props;\n    const history = useHistory();\n    \n    const makePost = async (event) => {\n        const title = document.getElementById(\"np-title\").value;\n        const description = document.getElementById(\"np-description\").value;\n        const price = document.getElementById(\"np-price\").value;\n        const location = document.getElementById(\"np-location\").value;\n        const deliver = document.getElementById('np-deliver').checked;\n        event.preventDefault()\n        \n        let userPost = {\n          title,\n          description,\n          price,\n          location,\n          willDeliver: deliver\n        }\n\n        await getUserInfo(userPost)\n    \n    }\n\n    const getUserInfo = async (userPost) => {\n      if (!userPost.location) {\n        userPost.location = \"[On Request]\"\n      }\n\n      const newPost = await fetch(`${API_URL}/posts`, {\n          method: \"POST\",\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n          },\n          body: JSON.stringify({\n            post: {\n              title: userPost.title,\n              description: userPost.description,\n              price: userPost.price,\n              location: userPost.location,\n              willDeliver: userPost.willDeliver\n            }\n          })\n        }).then(response => response.json())\n          .then(result => {\n            if (!result.error) {\n              setAlertMessage(\"Your post has been added!\")\n              history.push('/')\n            } else {\n              setAlertMessage(\"There was an error adding your post.\")\n            }\n          })\n          .catch(console.error);\n  }\n\n\n    return (\n        <div className=\"new-post\">\n            <h2>Create New Post</h2>\n                <form>\n                    <div className=\"inputs\">\n                        <input id=\"np-title\" placeholder=\"Title * \" required></input>\n                        <br />\n                        <input id=\"np-description\" placeholder=\"Description * \" required></input>\n                        <br />\n                        <input id=\"np-price\" placeholder=\"Price * \" required></input>\n                        <br />\n                        <input id=\"np-location\" placeholder=\"Location\"></input>\n                        <br />\n                        <input id=\"np-deliver\" type='checkbox'></input>\n                        <label>Willing To Deliver?</label>\n                        <br />\n                    </div>\n                    <div className=\"submit-button\">\n                        <button type='submit' onClick={makePost}>CREATE</button>\n                    </div>\n\n                </form>\n        </div>\n    )\n}\n\nexport default NewPost"],"mappings":"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"},"metadata":{},"sourceType":"module"}