{"ast":null,"code":"import _toConsumableArray from\"/Users/annamahlberg/Documents/Bootcamp/course_work/project_09/strangerThings/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/annamahlberg/Documents/Bootcamp/course_work/project_09/strangerThings/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/annamahlberg/Documents/Bootcamp/course_work/project_09/strangerThings/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var API_URL='https://strangers-things.herokuapp.com/api/2206-FTB-ET-WEB-FT-B';var Posts=function Posts(props){var userName=props.userName,setAlertMessage=props.setAlertMessage,setPostID=props.setPostID,setPostIndex=props.setPostIndex;var history=useHistory();var fetchPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var posts,postsResults;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(API_URL,\"/posts\"));case 3:posts=_context.sent;_context.next=6;return posts.json();case 6:postsResults=_context.sent;return _context.abrupt(\"return\",postsResults.data.posts);case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.error('Unable to fetch posts',_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function fetchPosts(){return _ref.apply(this,arguments);};}();var renderPosts=function renderPosts(postList){var postsContainer=document.getElementById('posts-container');if(!postList){postsContainer.innerHTML=\"No posts to display\";return;}var postsContainerHTML='';for(var i=0;i<postList.length;i++){var post=postList[i];var postHTML=\"\\n                <div class=\\\"single-post\\\">\\n                    <div class=\\\"post\\\" id=\\\"post-title\\\">\\n                        <h2>\".concat(post.title,\"</h2>\\n                        <div class=\\\"send-message\\\">\\n                            <button data-id=\").concat(post._id,\" class=\\\"view-post-button\\\">\").concat(post.author.username===userName?\"VIEW MY POST\":\"SEND MESSAGE\",\"</button>\\n                        </div>\\n                    </div>\\n                    <div class=\\\"post\\\" id=\\\"post-description\\\">\\n                        <p>\").concat(post.description,\"</p>\\n                    </div>\\n                    <div class=\\\"post\\\" id=\\\"post-price\\\">\\n                        <p>Price: \").concat(post.price,\"</p>\\n                    </div>\\n                    <div class=\\\"post\\\" id=\\\"post-location\\\">\\n                        <p>Location: \").concat(post.location,\"</p>\\n                    </div>\\n                    <div class=\\\"post\\\" id=\\\"post-username\\\">\\n                        <p>Seller: \").concat(post.author.username,\"</p>\\n                    </div>\\n                </div>\\n            \");postsContainerHTML+=postHTML;}postsContainer.innerHTML=postsContainerHTML;var viewPostButtons=_toConsumableArray(document.getElementsByClassName('view-post-button'));var _loop=function _loop(j){var button=viewPostButtons[j];button.addEventListener('click',function(){if(userName){setPostID(button.dataset.id);setPostIndex(j);history.push('/viewPost');}else{setAlertMessage(\"You must be logged in to send a message.\");history.push('/login');}});};for(var j=0;j<viewPostButtons.length;j++){_loop(j);}};var initialPosts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var posts;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetchPosts();case 2:posts=_context2.sent;renderPosts(posts);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function initialPosts(){return _ref2.apply(this,arguments);};}();var searchPage=function searchPage(){var input=document.getElementById('search-input').value;input=input.toLowerCase();var doc=document.getElementsByClassName(\"single-post\");for(var i=0;i<doc.length;i++){if(!doc[i].innerHTML.toLowerCase().includes(input)){doc[i].style.display=\"none\";doc[i].style.backgroundcolor=\"white\";}else{doc[i].style.display=\"flex\";doc[i].style.backgroundcolor=\"rgb(246, 246, 240)\";}}};initialPosts();return/*#__PURE__*/_jsxs(\"div\",{className:\"posts\",children:[/*#__PURE__*/_jsx(\"h1\",{children:userName?\"Welcome back \".concat(userName,\"!!\"):\"Welcome! Log in to get started!\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"post-stuff\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"search-posts\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"search-input\",type:\"text\",placeholder:\"Search Posts\",onChange:searchPage}),/*#__PURE__*/_jsx(\"button\",{children:\"Search\"})]}),/*#__PURE__*/_jsx(\"div\",{id:\"add-post\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){if(userName){history.push('/newPost');}else{setAlertMessage(\"You must be logged in in order to make a post.\");history.push('/login');}},children:\"Create New Post\"})})]}),/*#__PURE__*/_jsx(\"div\",{id:\"posts-container\"})]});};export default Posts;","map":{"version":3,"names":["useHistory","API_URL","Posts","props","userName","setAlertMessage","setPostID","setPostIndex","history","fetchPosts","fetch","posts","json","postsResults","data","console","error","renderPosts","postList","postsContainer","document","getElementById","innerHTML","postsContainerHTML","i","length","post","postHTML","title","_id","author","username","description","price","location","viewPostButtons","getElementsByClassName","j","button","addEventListener","dataset","id","push","initialPosts","searchPage","input","value","toLowerCase","doc","includes","style","display","backgroundcolor"],"sources":["/Users/annamahlberg/Documents/Bootcamp/course_work/project_09/strangerThings/src/posts.js"],"sourcesContent":["import { useHistory } from \"react-router-dom\";\n\nconst API_URL = 'https://strangers-things.herokuapp.com/api/2206-FTB-ET-WEB-FT-B'\n\nconst Posts = (props) => {\n    const { userName, setAlertMessage, setPostID, setPostIndex } = props;\n    const history = useHistory();\n\n    const fetchPosts = async () => {\n        try {\n            const posts = await fetch(`${API_URL}/posts`);\n            const postsResults = await posts.json();\n            return postsResults.data.posts;\n\n        } catch (err) {\n            console.error('Unable to fetch posts', err);\n        }\n    }\n    \n    const renderPosts = (postList) => {\n        let postsContainer = document.getElementById('posts-container')\n    \n        if (!postList) {\n            postsContainer.innerHTML = \"No posts to display\"\n            return;\n        }\n    \n        let postsContainerHTML = '';\n        for (let i = 0; i < postList.length; i++) {\n            const post = postList[i];\n            \n            let postHTML = `\n                <div class=\"single-post\">\n                    <div class=\"post\" id=\"post-title\">\n                        <h2>${post.title}</h2>\n                        <div class=\"send-message\">\n                            <button data-id=${post._id} class=\"view-post-button\">${post.author.username === userName ? \"VIEW MY POST\" : \"SEND MESSAGE\"}</button>\n                        </div>\n                    </div>\n                    <div class=\"post\" id=\"post-description\">\n                        <p>${post.description}</p>\n                    </div>\n                    <div class=\"post\" id=\"post-price\">\n                        <p>Price: ${post.price}</p>\n                    </div>\n                    <div class=\"post\" id=\"post-location\">\n                        <p>Location: ${post.location}</p>\n                    </div>\n                    <div class=\"post\" id=\"post-username\">\n                        <p>Seller: ${post.author.username}</p>\n                    </div>\n                </div>\n            `;\n    \n            postsContainerHTML += postHTML;\n        }\n\n        postsContainer.innerHTML = postsContainerHTML;\n\n        let viewPostButtons = [...document.getElementsByClassName('view-post-button')]\n        for (let j = 0; j < viewPostButtons.length; j++) {\n            const button = viewPostButtons[j];\n            button.addEventListener('click', () => {\n                if (userName) {\n                    setPostID(button.dataset.id)\n                    setPostIndex(j)\n                    history.push('/viewPost')\n                } else {\n                    setAlertMessage(\"You must be logged in to send a message.\")\n                    history.push('/login')\n                }\n            });\n        }\n    }\n\n    const initialPosts = async () => {\n        const posts = await fetchPosts();\n        renderPosts(posts);\n    }\n\n    const searchPage = () => {\n        let input = document.getElementById('search-input').value\n        input = input.toLowerCase();\n        let doc = document.getElementsByClassName(\"single-post\")\n\n        for (let i = 0; i < doc.length; i++) {\n            if (!doc[i].innerHTML.toLowerCase().includes(input)) {\n                doc[i].style.display = \"none\"\n                doc[i].style.backgroundcolor = \"white\"\n            } else {\n                doc[i].style.display = \"flex\"\n                doc[i].style.backgroundcolor = \"rgb(246, 246, 240)\"\n            }\n        }\n    }\n\n    initialPosts();\n            \n    return (\n        <div className=\"posts\">\n            <h1>{ userName ? `Welcome back ${userName}!!` : `Welcome! Log in to get started!`}</h1>\n            <div id=\"post-stuff\">\n                <div id=\"search-posts\">\n                    <input id=\"search-input\" type='text' placeholder=\"Search Posts\" onChange={searchPage}></input>\n                    <button>Search</button>\n                </div>\n                <div id=\"add-post\">\n                    <button onClick={() => {\n                        if (userName) {\n                            history.push('/newPost');\n                        } else {\n                            setAlertMessage(\"You must be logged in in order to make a post.\");\n                            history.push('/login')\n                        }\n                    }}>Create New Post</button>\n                </div>\n            </div>\n            <div id='posts-container'></div>\n        </div>\n    )\n}\n\nexport default Posts;"],"mappings":"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"},"metadata":{},"sourceType":"module"}