{"ast":null,"code":"import _regeneratorRuntime from\"/Users/annamahlberg/Documents/Bootcamp/course_work/project_09/strangerThings/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/annamahlberg/Documents/Bootcamp/course_work/project_09/strangerThings/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var API_URL='https://strangers-things.herokuapp.com/api/2206-FTB-ET-WEB-FT-B';var Register=function Register(props){var setUserName=props.setUserName,setAlertMessage=props.setAlertMessage,setToken=props.setToken,setLogText=props.setLogText;var history=useHistory();var postUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(userData){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"\".concat(API_URL,\"/users/register\"),{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify({user:{username:userData.username,password:userData.password}})}).then(function(response){return response.json();}).then(function(result){if(!result.error){setAlertMessage(result.data.message);setToken(result.data.token);setUserName(userData.username);setLogText(\"LOGOUT\");return history.push('/');}else{setAlertMessage(result.error.message);}}).catch(console.error);case 2:case\"end\":return _context.stop();}}},_callee);}));return function postUser(_x){return _ref.apply(this,arguments);};}();var submitRegistration=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){var usernameInput,password1Input,password2Input,userData;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:usernameInput=document.getElementById('register-username').value;password1Input=document.getElementById('register-password1').value;password2Input=document.getElementById('register-password2').value;userData={};event.preventDefault();if(!(usernameInput===\"\"||password1Input===\"\"||password2Input===\"\")){_context2.next=9;break;}setAlertMessage(\"Make sure to fill out each input.\");_context2.next=20;break;case 9:if(!(usernameInput.length<6||password1Input.length<6||password2Input<6)){_context2.next=13;break;}setAlertMessage(\"Username and password must be at least 6 characters long.\");_context2.next=20;break;case 13:if(!(password1Input===password2Input)){_context2.next=19;break;}userData={username:usernameInput,password:password1Input};_context2.next=17;return postUser(userData);case 17:_context2.next=20;break;case 19:setAlertMessage(\"The passwords you entered do not match, try again!\");case 20:case\"end\":return _context2.stop();}}},_callee2);}));return function submitRegistration(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"register\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"REGISTER\"}),/*#__PURE__*/_jsx(\"div\",{id:\"form-container\",children:/*#__PURE__*/_jsxs(\"form\",{id:\"register-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inputs\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"register-username\",type:\"text\",placeholder:\"Create a Username\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"register-password1\",type:\"password\",placeholder:\"Create a Password\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Confirm Password:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"register-password2\",type:\"password\",placeholder:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"submit-button\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:submitRegistration,children:\"SUBMIT\"})})]})})]});};export default Register;","map":{"version":3,"names":["useHistory","API_URL","Register","props","setUserName","setAlertMessage","setToken","setLogText","history","postUser","userData","fetch","method","headers","body","JSON","stringify","user","username","password","then","response","json","result","error","data","message","token","push","catch","console","submitRegistration","event","usernameInput","document","getElementById","value","password1Input","password2Input","preventDefault","length"],"sources":["/Users/annamahlberg/Documents/Bootcamp/course_work/project_09/strangerThings/src/register.js"],"sourcesContent":["import { useHistory } from \"react-router-dom\";\n\nconst API_URL = 'https://strangers-things.herokuapp.com/api/2206-FTB-ET-WEB-FT-B'\n\nconst Register = (props) => {\n    const { setUserName, setAlertMessage, setToken, setLogText } = props;\n    const history = useHistory();\n    \n    const postUser = async (userData) => {\n        await fetch(`${API_URL}/users/register`, {\n            method: \"POST\",\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                user: {\n                    username: userData.username,\n                    password: userData.password\n                }\n            })\n        }).then(response => response.json())\n        .then(result => {\n            if (!result.error) {\n                setAlertMessage(result.data.message);\n                setToken(result.data.token);\n                setUserName(userData.username);\n                setLogText(\"LOGOUT\")\n                return history.push('/');\n            } else {\n                setAlertMessage(result.error.message);\n            }\n        })\n        .catch(console.error)\n    }\n\n    const submitRegistration = async (event) => {\n        const usernameInput = document.getElementById('register-username').value;\n        const password1Input = document.getElementById('register-password1').value;\n        const password2Input = document.getElementById('register-password2').value;\n        let userData = {};\n        event.preventDefault();\n        \n        if (usernameInput === \"\" || password1Input === \"\" || password2Input === \"\") {\n            setAlertMessage(\"Make sure to fill out each input.\");\n        } else if (usernameInput.length < 6 || password1Input.length < 6 || password2Input < 6) {\n            setAlertMessage(\"Username and password must be at least 6 characters long.\")\n        } else if (password1Input === password2Input) {\n            userData = {\n                username: usernameInput,\n                password: password1Input\n            };\n            await postUser(userData);\n        } else {\n            setAlertMessage(\"The passwords you entered do not match, try again!\")\n        } \n    }\n    \n    return (\n        <div className=\"register\">\n            <h1>REGISTER</h1>\n            <div id=\"form-container\">\n                <form id='register-form'>\n                    <div className=\"inputs\">\n                        <label>Username:</label>\n                        <input id='register-username' type='text' placeholder=\"Create a Username\"></input>\n                        <br />\n                        <label>Password:</label>\n                        <input id='register-password1' type='password' placeholder=\"Create a Password\"></input>\n                        <br />\n                        <label>Confirm Password:</label>\n                        <input id='register-password2' type='password' placeholder=\"Confirm Password\"></input>\n                        <br />\n                    </div>\n                    <div className=\"submit-button\">\n                        <button type=\"submit\" onClick={submitRegistration}>SUBMIT</button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    )\n}\n\nexport default Register;"],"mappings":"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"},"metadata":{},"sourceType":"module"}