{"ast":null,"code":"import _regeneratorRuntime from\"/Users/annamahlberg/Documents/Bootcamp/course_work/project_09/strangerThings/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/annamahlberg/Documents/Bootcamp/course_work/project_09/strangerThings/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{Link,useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var API_URL='https://strangers-things.herokuapp.com/api/2206-FTB-ET-WEB-FT-B';var Login=function Login(props){var setAlertMessage=props.setAlertMessage,setUserName=props.setUserName,setToken=props.setToken,setLogText=props.setLogText;var history=useHistory();var submitLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var userNameInput,password1Input,userData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:userNameInput=document.getElementById('login-username').value;password1Input=document.getElementById('login-password').value;event.preventDefault();userData={username:userNameInput,password:password1Input};_context.next=6;return getUserToken(userData);case 6:case\"end\":return _context.stop();}}},_callee);}));return function submitLogin(_x){return _ref.apply(this,arguments);};}();var getUserToken=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(userData){var user;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"\".concat(API_URL,\"/users/login\"),{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify({user:{username:userData.username,password:userData.password}})}).then(function(response){return response.json();}).then(function(result){if(!result.error){setAlertMessage(result.data.message);setToken(result.data.token);setUserName(userData.username);setLogText(\"LOGOUT\");history.push('/');}else{setAlertMessage(result.error.message);}}).catch(console.error);case 2:user=_context2.sent;case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function getUserToken(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"login\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"LOGIN\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"login-container\",children:[/*#__PURE__*/_jsxs(\"form\",{id:\"login-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inputs\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"login-username\",type:\"text\",placeholder:\"Enter Username\",required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"login-password\",type:\"password\",placeholder:\"Enter Password\",required:true}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"div\",{className:\"submit-button\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:submitLogin,children:\"SUBMIT\"})})]}),/*#__PURE__*/_jsx(\"div\",{id:\"register-link-container\",children:/*#__PURE__*/_jsx(Link,{to:\"/register\",id:\"register-link\",children:\"Don't have a log in? Click here to register!\"})})]})]});};export default Login;","map":{"version":3,"names":["Link","useHistory","API_URL","Login","props","setAlertMessage","setUserName","setToken","setLogText","history","submitLogin","event","userNameInput","document","getElementById","value","password1Input","preventDefault","userData","username","password","getUserToken","fetch","method","headers","body","JSON","stringify","user","then","response","json","result","error","data","message","token","push","catch","console"],"sources":["/Users/annamahlberg/Documents/Bootcamp/course_work/project_09/strangerThings/src/login.js"],"sourcesContent":["import { Link, useHistory } from 'react-router-dom';\n\nconst API_URL = 'https://strangers-things.herokuapp.com/api/2206-FTB-ET-WEB-FT-B'\n\nconst Login = (props) => {\n    const { setAlertMessage, setUserName, setToken, setLogText } = props;\n    const history = useHistory()\n    \n    const submitLogin = async (event) => {\n        const userNameInput = document.getElementById('login-username').value;\n        const password1Input = document.getElementById('login-password').value;\n        event.preventDefault();\n        \n        let userData = {\n            username: userNameInput,\n            password: password1Input\n        };\n        \n        await getUserToken(userData)\n    }\n    \n    const getUserToken = async (userData) => {\n        const user = await fetch(`${API_URL}/users/login`, {\n            method: \"POST\",\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                user: {\n                    username: userData.username,\n                    password: userData.password\n                }\n            })\n        }).then(response => response.json())\n        .then(result => {\n            if (!result.error) {\n                setAlertMessage(result.data.message);\n                setToken(result.data.token);\n                setUserName(userData.username)\n                setLogText(\"LOGOUT\");\n                history.push('/');\n            } else {\n                setAlertMessage(result.error.message);\n            }\n        })\n        .catch(console.error)\n    }\n\n    return (\n        <div className=\"login\">\n            <h1>LOGIN</h1>\n            <div id='login-container'>\n                <form id='login-form'>\n                    <div className='inputs'>\n                        <label>Username:</label>\n                        <input id='login-username' type='text' placeholder=\"Enter Username\" required></input>\n                        <br />\n                        <label>Password:</label>\n                        <input id='login-password' type='password' placeholder=\"Enter Password\" required></input>\n                        <br />\n                    </div>\n                    <div className='submit-button'>\n                        <button type=\"submit\" onClick={submitLogin}>SUBMIT</button>\n                    </div>\n                </form>\n                <div id=\"register-link-container\">\n                    <Link to=\"/register\" id=\"register-link\">Don't have a log in? Click here to register!</Link>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Login;"],"mappings":"oVAAA,OAASA,IAAT,CAAeC,UAAf,KAAiC,kBAAjC,C,wFAEA,GAAMC,QAAO,CAAG,iEAAhB,CAEA,GAAMC,MAAK,CAAG,QAARA,MAAQ,CAACC,KAAD,CAAW,CACrB,GAAQC,gBAAR,CAA+DD,KAA/D,CAAQC,eAAR,CAAyBC,WAAzB,CAA+DF,KAA/D,CAAyBE,WAAzB,CAAsCC,QAAtC,CAA+DH,KAA/D,CAAsCG,QAAtC,CAAgDC,UAAhD,CAA+DJ,KAA/D,CAAgDI,UAAhD,CACA,GAAMC,QAAO,CAAGR,UAAU,EAA1B,CAEA,GAAMS,YAAW,4FAAG,iBAAOC,KAAP,8JACVC,aADU,CACMC,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CC,KADhD,CAEVC,cAFU,CAEOH,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CC,KAFjD,CAGhBJ,KAAK,CAACM,cAAN,GAEIC,QALY,CAKD,CACXC,QAAQ,CAAEP,aADC,CAEXQ,QAAQ,CAAEJ,cAFC,CALC,uBAUVK,aAAY,CAACH,QAAD,CAVF,uDAAH,kBAAXR,YAAW,4CAAjB,CAaA,GAAMW,aAAY,6FAAG,kBAAOH,QAAP,wJACEI,MAAK,WAAIpB,OAAJ,iBAA2B,CAC/CqB,MAAM,CAAE,MADuC,CAE/CC,OAAO,CAAE,CACL,eAAgB,kBADX,CAFsC,CAK/CC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBC,IAAI,CAAE,CACFT,QAAQ,CAAED,QAAQ,CAACC,QADjB,CAEFC,QAAQ,CAAEF,QAAQ,CAACE,QAFjB,CADW,CAAf,CALyC,CAA3B,CAAL,CAWhBS,IAXgB,CAWX,SAAAC,QAAQ,QAAIA,SAAQ,CAACC,IAAT,EAAJ,EAXG,EAYlBF,IAZkB,CAYb,SAAAG,MAAM,CAAI,CACZ,GAAI,CAACA,MAAM,CAACC,KAAZ,CAAmB,CACf5B,eAAe,CAAC2B,MAAM,CAACE,IAAP,CAAYC,OAAb,CAAf,CACA5B,QAAQ,CAACyB,MAAM,CAACE,IAAP,CAAYE,KAAb,CAAR,CACA9B,WAAW,CAACY,QAAQ,CAACC,QAAV,CAAX,CACAX,UAAU,CAAC,QAAD,CAAV,CACAC,OAAO,CAAC4B,IAAR,CAAa,GAAb,EACH,CAND,IAMO,CACHhC,eAAe,CAAC2B,MAAM,CAACC,KAAP,CAAaE,OAAd,CAAf,CACH,CACJ,CAtBkB,EAuBlBG,KAvBkB,CAuBZC,OAAO,CAACN,KAvBI,CADF,QACXL,IADW,wEAAH,kBAAZP,aAAY,8CAAlB,CA2BA,mBACI,aAAK,SAAS,CAAC,OAAf,wBACI,6BADJ,cAEI,aAAK,EAAE,CAAC,iBAAR,wBACI,cAAM,EAAE,CAAC,YAAT,wBACI,aAAK,SAAS,CAAC,QAAf,wBACI,oCADJ,cAEI,cAAO,EAAE,CAAC,gBAAV,CAA2B,IAAI,CAAC,MAAhC,CAAuC,WAAW,CAAC,gBAAnD,CAAoE,QAAQ,KAA5E,EAFJ,cAGI,aAHJ,cAII,oCAJJ,cAKI,cAAO,EAAE,CAAC,gBAAV,CAA2B,IAAI,CAAC,UAAhC,CAA2C,WAAW,CAAC,gBAAvD,CAAwE,QAAQ,KAAhF,EALJ,cAMI,aANJ,GADJ,cASI,YAAK,SAAS,CAAC,eAAf,uBACI,eAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAEX,WAA/B,oBADJ,EATJ,GADJ,cAcI,YAAK,EAAE,CAAC,yBAAR,uBACI,KAAC,IAAD,EAAM,EAAE,CAAC,WAAT,CAAqB,EAAE,CAAC,eAAxB,0DADJ,EAdJ,GAFJ,GADJ,CAuBH,CAnED,CAqEA,cAAeP,MAAf"},"metadata":{},"sourceType":"module"}